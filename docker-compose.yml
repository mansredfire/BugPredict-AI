version: '3.8'

services:
  api:
    build:
      context: ..
      dockerfile: docker/Dockerfile
    container_name: bugpredict-api
    ports:
      - "8000:8000"
    volumes:
      - ../data:/app/data
      - ../logs:/app/logs
      - ../config:/app/config
    environment:
      - PYTHONUNBUFFERED=1
      - HACKERONE_TOKEN=${HACKERONE_TOKEN}
      - BUGCROWD_TOKEN=${BUGCROWD_TOKEN}
      - NVD_API_KEY=${NVD_API_KEY}
    restart: unless-stopped
    networks:
      - bugpredict-network

  web:
    image: nginx:alpine
    container_name: bugpredict-web
    ports:
      - "80:80"
    volumes:
      - ../src/web:/usr/share/nginx/html
      - ./nginx.conf:/etc/nginx/nginx.conf:ro
    depends_on:
      - api
    restart: unless-stopped
    networks:
      - bugpredict-network

  mlflow:
    image: python:3.10-slim
    container_name: bugpredict-mlflow
    command: >
      bash -c "pip install mlflow &&
               mlflow server
               --backend-store-uri /mlflow
               --default-artifact-root /mlflow/artifacts
               --host 0.0.0.0
               --port 5000"
    ports:
      - "5000:5000"
    volumes:
      - ../mlruns:/mlflow
    restart: unless-stopped
    networks:
      - bugpredict-network

networks:
  bugpredict-network:
    driver: bridge

volumes:
  data:
  logs:
  mlruns:
```

---

## ðŸ“„ File: `docker/.dockerignore`
```
# Python
__pycache__/
*.py[cod]
*$py.class
*.so
.Python
build/
develop-eggs/
dist/
downloads/
eggs/
.eggs/
lib/
lib64/
parts/
sdist/
var/
wheels/
*.egg-info/
.installed.cfg
*.egg

# Virtual environments
venv/
env/
ENV/

# IDEs
.vscode/
.idea/
*.swp
*.swo

# Git
.git/
.gitignore

# Data files
data/raw/*
data/processed/*
!data/raw/.gitkeep
!data/processed/.gitkeep

# Models (download separately)
data/models/*.pkl
data/models/*.h5

# Logs
*.log
logs/

# OS
.DS_Store
Thumbs.db

# Documentation
docs/
*.md
!README.md

# Tests
tests/
.pytest_cache/

# Notebooks
notebooks/
*.ipynb

# CI/CD
.github/
.gitlab-ci.yml
