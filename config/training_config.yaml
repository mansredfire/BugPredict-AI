# BugPredict AI Training Configuration

# Data Collection
data_collection:
  # HackerOne
  collect_hackerone: true
  hackerone_limit: 10000
  hackerone_token: null  # Set via environment variable HACKERONE_TOKEN
  
  # Bugcrowd
  collect_bugcrowd: true
  bugcrowd_limit: 5000
  bugcrowd_token: null  # Set via environment variable BUGCROWD_TOKEN
  
  # CVE/NVD
  collect_cve: true
  nvd_api_key: null  # Set via environment variable NVD_API_KEY
  cve_start_date: "2020-01-01"
  
  # GitHub Security Advisories
  collect_github: false
  github_token: null  # Set via environment variable GITHUB_TOKEN

# Data Preprocessing
preprocessing:
  remove_duplicates: true
  normalize_text: true
  fill_missing_values: true
  outlier_detection: true
  min_report_quality: 0.5

# Feature Engineering
features:
  use_tech_embeddings: true
  embedding_dim: 50
  text_vectorization: "tfidf"
  max_features: 10000
  ngram_range: [1, 2]
  
  # Temporal features
  include_temporal: true
  
  # Interaction features
  create_interactions: true

# Model Training
training:
  # Train/test split
  test_size: 0.2
  validation_size: 0.1
  random_state: 42
  stratify: true
  
  # Models to train
  models:
    - random_forest
    - xgboost
    - lightgbm
    - catboost
    - gradient_boosting
    - neural_network
  
  # Hyperparameters
  hyperparameters:
    random_forest:
      n_estimators: 200
      max_depth: 15
      min_samples_split: 5
      min_samples_leaf: 2
      class_weight: "balanced"
    
    xgboost:
      n_estimators: 200
      max_depth: 10
      learning_rate: 0.1
      subsample: 0.8
      colsample_bytree: 0.8
    
    lightgbm:
      n_estimators: 200
      max_depth: 10
      learning_rate: 0.1
      num_leaves: 31
    
    catboost:
      iterations: 200
      depth: 10
      learning_rate: 0.1
    
    neural_network:
      hidden_layer_sizes: [256, 128, 64]
      activation: "relu"
      solver: "adam"
      learning_rate: "adaptive"
      max_iter: 500
  
  # Ensemble
  ensemble_method: "averaging"  # voting, averaging, weighted
  
  # Cross-validation
  cross_validation:
    enabled: true
    n_splits: 5
    scoring: "f1_weighted"

# MLflow
mlflow:
  enabled: true
  tracking_uri: "mlruns"
  experiment_name: "bugpredict_training"
  
# Output
output:
  models_dir: "data/models"
  save_feature_importance: true
  save_confusion_matrix: true
  save_classification_report: true

# Logging
logging:
  level: "INFO"
  file: "training.log"
